<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>홈페이지 메인 레이아웃 (순수 CSS)</title>
        <!-- Tailwind CSS CDN을 제거하고, 모든 스타일을 직접 작성했습니다. -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="assets/css/reset.css" />
        <link rel="stylesheet" href="assets/css/main.css" />
        <script src="assets/js/jqCustom.js"></script>
    </head>
    <body>
        <!-- ========== 고정 내비게이션 바 (Sticky Header) ========== -->
        <header class="sticky-header">
            <nav class="content-container">
                <div class="logo">Logo</div>
                <div class="nav-links">
                    <a href="#section-2">핵심 가치</a>
                    <a href="#section-3">프로젝트</a>
                    <a href="#section-5">팀 소개</a>
                    <a href="#section-8" class="nav-cta">문의하기</a>
                </div>
            </nav>
        </header>

        <!-- ========== 섹션 1: 풀사이즈 비디오 배경 (Video Placeholder) ========== -->
        <section id="section-1" class="full-screen">
            <div class="hero-content">
                <h1 class="animate-item active">시선을 사로잡는 오프닝</h1>
                <p class="animate-item active">풀사이즈 배경과 함께 강력한 메시지를 전달하세요.</p>
                <button class="animate-item active btn-primary">시작하기</button>
            </div>
        </section>

        <!-- ========== 섹션 2: 서비스 소개 ========== -->
        <section id="section-2">
            <div class="content-container">
                <div class="title animate-item">
                    <h3>자주 찾는 서비스</h3>
                    <p>가장 많이 이용하는 주요 서비스들을 빠르고 쉽게 이용하세요.</p>
                </div>
                <!-- grid-container와 cols-3 클래스 사용 -->
                <div class="boxs">
                    <div class="feature-box animate-item">
                        <a href="#">
                            <div id="step1" class="box-inner feature-box animate-item">
                                <h4>분양계획</h4>
                                <p>월별 주택 분양 계획과 실적 자료를 확인하세요.</p>
                                <span><img src="assets/img/icon-1.png" class="block" /><img src="assets/img/icon-1-on.png" class="on" /></span>
                                <p class="linkArrow"><img src="assets/img/link-arrow-1.png" class="block" /><img src="assets/img/link-arrow-1-on.png" class="on" /></p>
                            </div>
                        </a>
                    </div>
                    <div class="feature-box animate-item">
                        <a href="#">
                            <div id="step2" class="box-inner feature-box animate-item">
                                <h4>분양캘린더</h4>
                                <p>전국 분양, 청약, 입주 일정을 간편하게 확인하세요.</p>
                                <span><img src="assets/img/icon-2.png" class="block" /><img src="assets/img/icon-2-on.png" class="on" /></span>
                                <p class="linkArrow"><img src="assets/img/link-arrow-1.png" class="block" /><img src="assets/img/link-arrow-1-on.png" class="on" /></p>
                            </div>
                        </a>
                    </div>
                    <div class="feature-box animate-item">
                        <a href="#">
                            <div id="step3" class="box-inner feature-box animate-item">
                                <h4>주택통계정보</h4>
                                <p>최신 주택 시장 통계를 제공하여 시장 동향을 파악할 수 있습니다.</p>
                                <span><img src="assets/img/icon-3.png" class="block" /><img src="assets/img/icon-3-on.png" class="on" /></span>
                                <p class="linkArrow"><img src="assets/img/link-arrow-1.png" class="block" /><img src="assets/img/link-arrow-1-on.png" class="on" /></p>
                            </div>
                        </a>
                    </div>
                    <div class="feature-box animate-item">
                        <a href="#">
                            <div id="step4" class="box-inner feature-box animate-item">
                                <h4>법령정보</h4>
                                <p>주택 관련 법령과 규정을 쉽고 빠르게 찾아볼 수 있습니다.</p>
                                <span><img src="assets/img/icon-4.png" class="block" /><img src="assets/img/icon-4-on.png" class="on" /></span>
                                <p class="linkArrow"><img src="assets/img/link-arrow-1.png" class="block" /><img src="assets/img/link-arrow-1-on.png" class="on" /></p>
                            </div>
                        </a>
                    </div>
                    <div class="feature-box animate-item">
                        <a href="#">
                            <div id="step5" class="box-inner feature-box animate-item">
                                <h4>증명서발급</h4>
                                <p>각종 증명서 발급 신청을 간편하게 처리하세요.</p>
                                <span><img src="assets/img/icon-5.png" class="block" /><img src="assets/img/icon-5-on.png" class="on" /></span>
                                <p class="linkArrow"><img src="assets/img/link-arrow-1.png" class="block" /><img src="assets/img/link-arrow-1-on.png" class="on" /></p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== 섹션 3========== -->
        <section id="section-3" class="animate-item newsTabArea">
            <!-- s: 부동산 뉴스 -->
            <!-- 탭 네비게이션 영역 -->
            <div class="tab-nav animate-item">
                <button id="tab-button-1" onclick="switchTab('tab1')" class="tab-button" data-tab-id="tab1">부동산 뉴스</button>
                <button id="tab-button-2" onclick="switchTab('tab2')" class="tab-button" data-tab-id="tab2">공지사항</button>
                <button id="tab-button-3" onclick="switchTab('tab3')" class="tab-button" data-tab-id="tab3">보도자료</button>
            </div>

            <!-- 탭 컨텐츠 영역 -->
            <div id="tab-content-container">
                <!-- 탭 1 컨텐츠: 인기 상품 (10개) -->
                <div id="tab1" class="tab-content" data-tab-id="tab1">
                    <div class="carousel-wrapper">
                        <div class="carousel-clipper">
                            <div id="track-tab1" class="carousel-track">
                                <!-- 컨텐츠 1 (인기 상품) -->
                                <div class="carousel-item animate-item">
                                    <a href="#">
                                        <div class="card">
                                            <p class="categoy">부동산 뉴스</p>
                                            <div class="title">HUG, '25.8월 미분양관리지역 선정 공고-1</div>
                                            <div class="date">
                                                <p>2025.08.01</p>
                                                <p class="cm-linkArrow"></p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <!-- 컨텐츠 2 -->
                                <div class="carousel-item animate-item">
                                    <a href="#">
                                        <div class="card">
                                            <p class="categoy">부동산 뉴스</p>
                                            <div class="title">HUG, '25.8월 미분양관리지역 선정 공고-2</div>
                                            <div class="date">
                                                <p>2025.08.01</p>
                                                <p class="cm-linkArrow"></p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <!-- 컨텐츠 3 -->
                                <div class="carousel-item animate-item">
                                    <a href="#">
                                        <div class="card">
                                            <p class="categoy">부동산 뉴스</p>
                                            <div class="title">HUG, '25.8월 미분양관리지역 선정 공고-3</div>
                                            <div class="date">
                                                <p>2025.08.01</p>
                                                <p class="cm-linkArrow"></p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <!-- 컨텐츠 4 -->
                                <div class="carousel-item animate-item">
                                    <a href="#">
                                        <div class="card">
                                            <p class="categoy">부동산 뉴스</p>
                                            <div class="title">HUG, '25.8월 미분양관리지역 선정 공고-4</div>
                                            <div class="date">
                                                <p>2025.08.01</p>
                                                <p class="cm-linkArrow"></p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <!-- 컨텐츠 5 -->
                                <div class="carousel-item animate-item">
                                    <a href="#">
                                        <div class="card">
                                            <p class="categoy">부동산 뉴스</p>
                                            <div class="title">HUG, '25.8월 미분양관리지역 선정 공고-5</div>
                                            <div class="date">
                                                <p>2025.08.01</p>
                                                <p class="cm-linkArrow"></p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- 버튼 -->
                        <button onclick="moveSlide('tab1', -1)" class="carousel-btn left" id="btn-left-tab1">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                        <button onclick="moveSlide('tab1', 1)" class="carousel-btn right" id="btn-right-tab1">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>

                <!-- 탭 2 컨텐츠: 신규 추천 (8개) -->
                <div id="tab2" class="tab-content" data-tab-id="tab2">
                    <div class="carousel-wrapper">
                        <div class="carousel-clipper">
                            <div id="track-tab2" class="carousel-track">
                                <!-- 컨텐츠 1 (신규 추천) -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 1</div>
                                        <p class="card-title">신규 추천 #1</p>
                                        <p class="card-description">가장 먼저 만나보는 따끈따끈한 신상품.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 2 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 2</div>
                                        <p class="card-title">신규 추천 #2</p>
                                        <p class="card-description">트렌드를 이끄는 감각적인 아이템.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 3 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 3</div>
                                        <p class="card-title">신규 추천 #3</p>
                                        <p class="card-description">혁신적인 기술이 적용된 제품.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 4 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 4</div>
                                        <p class="card-title">신규 추천 #4</p>
                                        <p class="card-description">전문가들이 극찬하는 고성능 제품.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 5 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 5</div>
                                        <p class="card-title">신규 추천 #5</p>
                                        <p class="card-description">환경을 생각한 친환경 소재.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 6 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 6</div>
                                        <p class="card-title">신규 추천 #6</p>
                                        <p class="card-description">세련된 컬러와 디자인.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 7 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 7</div>
                                        <p class="card-title">신규 추천 #7</p>
                                        <p class="card-description">새로운 라이프스타일을 제안합니다.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 8 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">신규 추천 이미지 8</div>
                                        <p class="card-title">신규 추천 #8</p>
                                        <p class="card-description">모두를 위한 가성비 끝판왕.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button onclick="moveSlide('tab2', -1)" class="carousel-btn left" id="btn-left-tab2">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                        <button onclick="moveSlide('tab2', 1)" class="carousel-btn right" id="btn-right-tab2">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>

                <!-- 탭 3 컨텐츠: 기간 한정 (6개) -->
                <div id="tab3" class="tab-content" data-tab-id="tab3">
                    <div class="carousel-wrapper">
                        <div class="carousel-clipper">
                            <div id="track-tab3" class="carousel-track">
                                <!-- 컨텐츠 1 (기간 한정) -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">기간 한정 이미지 1</div>
                                        <p class="card-title">기간 한정 #1</p>
                                        <p class="card-description">단 7일 동안만 판매하는 스페셜 상품!</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 2 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">기간 한정 이미지 2</div>
                                        <p class="card-title">기간 한정 #2</p>
                                        <p class="card-description">놓치면 후회할 특별한 기회.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 3 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">기간 한정 이미지 3</div>
                                        <p class="card-title">기간 한정 #3</p>
                                        <p class="card-description">선착순으로 제공되는 대박 할인.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 4 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">기간 한정 이미지 4</div>
                                        <p class="card-title">기간 한정 #4</p>
                                        <p class="card-description">마감 임박! 서둘러 주세요.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 5 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">기간 한정 이미지 5</div>
                                        <p class="card-title">기간 한정 #5</p>
                                        <p class="card-description">재입고 없는 리미티드 에디션.</p>
                                    </div>
                                </div>
                                <!-- 컨텐츠 6 -->
                                <div class="carousel-item animate-item">
                                    <div class="card">
                                        <div class="card-image">기간 한정 이미지 6</div>
                                        <p class="card-title">기간 한정 #6</p>
                                        <p class="card-description">이벤트 기간 동안만 이 가격!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button onclick="moveSlide('tab3', -1)" class="carousel-btn left" id="btn-left-tab3">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                        <button onclick="moveSlide('tab3', 1)" class="carousel-btn right" id="btn-right-tab3">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
            <!-- e: 부동산 뉴스 -->
        </section>

        <!-- ========== 섹션 4: 고객 후기/특장점 ========== -->
        <section id="section-4">
            <!-- 분양정보 -->
            <div class="saleInfo">
                <div class="animate-item">
                    <div class="saleTitle">
                        <h4>분양정보</h4>
                        <a href="#">-></a>
                    </div>

                    <div class="detail">
                        <dl>
                            <dt>입주자모집정보</dt>
                            <dd><strong>1,142</strong>건</dd>
                        </dl>
                        <dl>
                            <dt>입주자모집정보</dt>
                            <dd><strong>1,142</strong>건</dd>
                        </dl>
                        <dl>
                            <dt>입주자모집정보</dt>
                            <dd><strong>1,142</strong>건</dd>
                        </dl>
                        <dl>
                            <dt>입주자모집정보</dt>
                            <dd><strong>1,142</strong>건</dd>
                        </dl>
                    </div>

                    <div class="scroll">
                        <ul>
                            <li>
                                <strong>청약접수</strong>
                                힐스테이트 용인포레, 경기도 용인시 처인구 삼가동 447-15번지 159
                            </li>
                            <li>
                                <strong>청약접수</strong>
                                힐스테이트 용인포레, 경기도 용인시 처인구 삼가동 447-15번지 159
                            </li>
                        </ul>
                        <p>
                            <a href="#">up</a>
                            <a href="#">down</a>
                        </p>
                    </div>
                </div>
            </div>
            <!-- e:분양정보 -->

            <!-- 분양통계 -->
            <div class="saleStats">
                <div class="animate-item">
                    <div class="saleTitle">
                        <h4>11월 분양계획 통계</h4>
                        <a href="#">-></a>
                    </div>

                    <div class="detail">
                        <dl class="total">
                            <dt>기준: 입주자 모집 공고일</dt>
                            <dd><strong>4,939</strong>호</dd>
                        </dl>
                        <div class="unit">
                            <dl>
                                <dt>자체분양</dt>
                                <dd><strong>674</strong>호</dd>
                            </dl>
                            <dl>
                                <dt>임대</dt>
                                <dd><strong>0</strong>호</dd>
                            </dl>
                            <dl>
                                <dt>재개발,재건축 등</dt>
                                <dd><strong>3,969</strong>호</dd>
                            </dl>
                            <dl>
                                <dt>단순도급</dt>
                                <dd><strong>569</strong>호</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
            <!-- e:분양통계 -->
        </section>

        <!-- ========== 섹션 5 ========== -->
        <section id="section-5">
            <div class="content-container lawBanner">
                <!-- 법령정보 외 기타/탭 -->
                <div class="animate-item">법령정보 외 기타/탭</div>
                <!-- e:법령정보 외 기타/탭 -->
                <div class="animate-item">배너</div>
            </div>
        </section>

        <!-- 섹션 6 -->
        <section id="section-6" style="background-color: white">
            <div class="content-container" style="text-align: center">
                <div class="title animate-item">
                    <h3>회원사 현황</h3>
                    <p>한국주택협회는 전국 <strong>59</strong>개의 회원사와 함께합니다.</p>
                </div>
                <div>
                    <ul class="grid-container">
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                        <li>Item 1</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="section-7" style="background-color: #f3f4f6">
            <div class="content-container" style="text-align: center">
                <h2 class="animate-item">섹션 7: 자주 묻는 질문 (FAQ)</h2>
                <p class="animate-item" style="font-size: 1.125rem; color: #6b7280; margin-top: 16px">질문과 답변을 위한 공간입니다.</p>
            </div>
        </section>

        <section id="section-8">
            <div class="content-container">
                <h2 class="animate-item">섹션 8: 문의하기 (Call to Action)</h2>
                <p class="animate-item">지금 바로 문의하여 프로젝트를 시작하세요!</p>
                <a href="#" class="btn-secondary animate-item"> 문의 페이지 바로가기 </a>
            </div>
        </section>

        <!-- ========== Footer ========== -->
        <footer>
            <p>&copy; 2025 All Rights Reserved. Demo Homepage.</p>
        </footer>

        <script>
            // =================================================
            // 슬라이더 상태 및 로직 관리
            // =================================================

            // 현재 슬라이드 인덱스를 저장하는 객체
            const currentSlideIndices = { tab1: 0, tab2: 0, tab3: 0 };
            // 각 탭별 전체 아이템 개수를 저장하는 객체 (onload 시 계산됨)
            const totalItems = {};

            // 화면 크기에 따른 한 페이지당 아이템 개수 계산
            function getItemsPerPage() {
                const width = window.innerWidth;
                if (width >= 1024) return 4;
                if (width >= 640) return 2;
                return 1;
            }

            // 탭 전환 로직
            function switchTab(tabId) {
                document.querySelectorAll(".tab-content").forEach((content) => content.classList.remove("active"));
                document.querySelectorAll(".tab-button").forEach((button) => button.classList.remove("active"));

                const activeContent = document.getElementById(tabId);
                const activeBtn = document.querySelector(`.tab-button[data-tab-id="${tabId}"]`);

                if (activeContent) activeContent.classList.add("active");
                if (activeBtn) activeBtn.classList.add("active");

                // 탭 전환 시 슬라이드 위치 초기화 및 애니메이션 재관찰
                currentSlideIndices[tabId] = 0;
                updateSlidePosition(tabId);
                observeNewItems();
            }

            // 슬라이더 이동 로직
            function moveSlide(tabId, direction) {
                const itemsPerPage = getItemsPerPage();
                currentSlideIndices[tabId] += direction * itemsPerPage;

                observeNewItems(); // 새로운 아이템 진입 시 애니메이션 관찰
                updateSlidePosition(tabId);
            }

            // 슬라이드 트랙 위치 업데이트 및 경계 처리
            function updateSlidePosition(tabId) {
                const track = document.getElementById(`track-${tabId}`);
                if (!track) return;

                const itemsPerPage = getItemsPerPage();
                const totalItemsCount = totalItems[tabId] || 0;
                let currentSlideIndex = currentSlideIndices[tabId];

                // 최대 인덱스 (마지막 아이템이 페이지의 끝에 오도록 조정)
                const maxIndex = Math.max(0, totalItemsCount - itemsPerPage);

                // 경계값 처리
                if (currentSlideIndex > maxIndex) {
                    currentSlideIndex = maxIndex;
                } else if (currentSlideIndex < 0) {
                    currentSlideIndex = 0;
                }
                currentSlideIndices[tabId] = currentSlideIndex;

                // CSS transform 계산
                const itemWidthPercent = 100 / itemsPerPage;
                const translateX = currentSlideIndex * itemWidthPercent;

                track.style.transform = `translateX(-${translateX}%)`;

                updateButtonState(tabId, currentSlideIndex, maxIndex);
            }

            // 버튼 활성화/비활성화 상태 업데이트
            function updateButtonState(tabId, currentIndex, maxIndex) {
                const btnLeft = document.getElementById(`btn-left-${tabId}`);
                const btnRight = document.getElementById(`btn-right-${tabId}`);

                // 시작점에서는 왼쪽 버튼 비활성화
                if (btnLeft) {
                    btnLeft.classList.toggle("disabled", currentIndex === 0);
                }
                // 끝점에서는 오른쪽 버튼 비활성화
                if (btnRight) {
                    btnRight.classList.toggle("disabled", currentIndex >= maxIndex);
                }
            }

            // 초기화 함수
            function initializeSlider() {
                document.querySelectorAll(".tab-content").forEach((tab) => {
                    const tabId = tab.dataset.tabId;
                    const track = document.getElementById(`track-${tabId}`);
                    if (track) {
                        // 순수 HTML로 변경되었으므로, 트랙의 자식 요소 개수를 세어 totalItems에 저장
                        totalItems[tabId] = track.children.length;
                    }
                });

                switchTab("tab1");
                // 초기 로드 시 화면에 보이는 아이템 관찰 시작
                observeNewItems();
            }

            // 화면 크기 변경 시 슬라이더 위치 재조정
            window.addEventListener("resize", () => {
                document.querySelectorAll(".tab-content.active").forEach((tab) => {
                    updateSlidePosition(tab.dataset.tabId);
                });
            });

            window.onload = initializeSlider;

            // =================================================
            // Intersection Observer 로직 (애니메이션)
            // =================================================

            let contentObserver;

            function initializeObserver() {
                // Intersection Observer 설정
                const observerOptions = {
                    root: null, // 뷰포트
                    rootMargin: "0px",
                    threshold: 0.2, // 요소의 20%가 보일 때
                };

                contentObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            // 'active' 클래스를 추가하여 애니메이션 발동
                            entry.target.classList.add("active");
                            // 한 번 실행 후 관찰 중지
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);
            }

            // 애니메이션이 적용되지 않은 새로운 아이템들을 관찰 시작
            function observeNewItems() {
                if (!contentObserver) {
                    initializeObserver();
                }

                // .animate-item 클래스는 있지만 .active 클래스가 없는 요소만 선택
                const animatedElements = document.querySelectorAll(".animate-item:not(.active)");

                animatedElements.forEach((element) => {
                    contentObserver.observe(element);
                });
            }
        </script>
    </body>
</html>
